# Contract Development with TypeChain

This document provides an overview of the contract development process using TypeChain in the `contract.ts` file.

## Overview

The `contract.ts` file is responsible for interacting with a smart contract deployed on the Ethereum Sepolia network. It uses the `ethers` library and TypeChain-generated types to ensure type safety and a seamless development experience.

## Key Components

### 1. Network Configuration

- **Network:** The Sepolia test network is used.
- **Provider URL:** The Alchemy API URL is fetched from the `.env` file (`ALCHEMY_API_URL`).
- **API Key:** The Alchemy API key is fetched from the `.env` file (`ALCHEMY_SEPOLIA_API_KEY`).

### 2. Environment Variables

The following environment variables are required for the contract to function:

- `ALCHEMY_SEPOLIA_API_KEY`: Your Alchemy API key for the Sepolia network.
- `ALCHEMY_API_URL`: The JSON-RPC URL for the Alchemy provider.
- `CONTRACT_ADDRESS`: The address of the deployed smart contract.
- `WALLET_PRIVATE_KEY`: The private key of the wallet used to sign transactions.

### 3. Provider and Wallet

- **Provider:** An instance of `ethers.JsonRpcProvider` is created using the Alchemy API URL and network configuration.
- **Wallet:** An instance of `ethers.Wallet` is created using the private key and provider.

### 4. Contract Interaction

- The contract is connected using the `SmartContractPruebaTecnicaAbi__factory` generated by TypeChain.
- The contract address and wallet are passed to the factory to create a contract instance.

### 5. Utility Functions

The following utility functions are exported for use in other parts of the application:

- `getWallet`: Returns the wallet instance.
- `getSigner`: Returns the wallet connected to the provider.
- `getContract`: Returns the contract instance.

## Prerequisites

### Install Dependencies

Ensure you have the required dependencies installed:

```bash
npm install ethers
npm install --save-dev typechain
```

### Generate TypeChain Types

Run the following command to generate TypeChain types for your smart contract:

```bash
npx typechain --target ethers-v6 --out-dir types './utils/**/*.json'
```

## Error Handling

The file includes error handling for missing environment variables and undefined instances of the provider, wallet, or contract. Ensure all required environment variables are set in the `.env` file.

## Example Usage

Here is an example of how to use the exported utility functions:

```typescript
import { getContract, getSigner } from './contract';

async function main() {
  const contract = getContract();
  const signer = getSigner();

  // Example: Call a function on the contract
  const result = await contract.someFunction();
  console.log('Result:', result);
}

main().catch(console.error);
```

## Notes

- Ensure the `.env` file is properly configured with the required variables.
- Use the Sepolia network for testing and development.
- Always handle private keys securely and avoid exposing them in your codebase.

## References

- [Ethers.js Documentation](https://docs.ethers.org/)
- [TypeChain Documentation](https://github.com/dethcrypto/TypeChain)
- [Alchemy API Documentation](https://docs.alchemy.com/)
